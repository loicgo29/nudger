#!/bin/bash

# Force immédiat le changement vers zsh
if [ "$(basename "$SHELL")" != "zsh" ]; then
    # Installer zsh si absent
    if ! command -v zsh >/dev/null; then
        echo "Installing zsh..."
        sudo apt update && sudo apt install -y zsh
    fi
    
    # Changer le shell par défaut
    sudo chsh -s "$(which zsh)" "$USER"
    
    # Exécuter le reste de la configuration dans zsh
    exec zsh -l <<'EOS'
        # Votre configuration zsh
        clear
        echo -e "\033[0;32m"
        cat << "EOF"
██╗░░░░░░█████╗░░██████╗░░█████╗░
██║░░░░░██╔══██╗██╔════╝░██╔══██╗
██║░░░░░██║░░██║██║░░██╗░██║░░██║
██║░░░░░██║░░██║██║░░╚██╗██║░░██║
███████╗╚█████╔╝╚██████╔╝╚█████╔╝
╚══════╝░╚════╝░░╚═════╝░░╚════╝░
EOF

        # Configuration de base
        export KUBECONFIG=~/nudger/config-vm/kubeconfig
        
        # Alias
        alias ll='ls -laFh --color=auto'
        alias k='kubectl'
        alias kgp='kubectl get pods'
        
        # Message final
        echo -e "\033[0m"
        echo "✅ Vous êtes maintenant dans zsh!"
EOS
fi
