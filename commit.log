[WARNING] Unstaged files detected.
[INFO] Stashing unstaged files to /Users/loicgourmelon/.cache/pre-commit/patch1756640126-85065.
check for merge conflicts............................(no files to check)Skipped
fix end of files.....................................(no files to check)Skipped
trim trailing whitespace.............................(no files to check)Skipped
check yaml...........................................(no files to check)Skipped
mixed line ending....................................(no files to check)Skipped
black................................................(no files to check)Skipped
yamllint.............................................(no files to check)Skipped
Ansible-lint.............................................................Failed
- hook id: ansible-lint
- exit code: 2

[2mINFO     Identified [0m[2;34m/Users/loicgourmelon/Devops/nudger[0m[2m as project root due [0m[1;2m.git directory[0m[2m.[0m
[2mINFO     Collection paths was patched to include extra directories /Users/loicgourmelon/.ansible/collections,/usr/share/ansible/collections,/Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages[0m
[2mINFO     Set ANSIBLE_LIBRARY=/Users/loicgourmelon/Devops/nudger/.ansible/modules:/Users/loicgourmelon/.ansible/plugins/modules:/usr/share/ansible/plugins/modules[0m
[2mINFO     Set ANSIBLE_COLLECTIONS_PATH=/Users/loicgourmelon/Devops/nudger/.ansible/collections:/Users/loicgourmelon/.ansible/collections:/usr/share/ansible/collections:/Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages[0m
[2mINFO     Set ANSIBLE_ROLES_PATH=/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles[0m
[2mWARNING  Another version of 'ansible.posix' 1.6.2 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 2.1.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mWARNING  Another version of 'community.general' 10.7.3 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 11.0.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mWARNING  Another version of 'kubernetes.core' 5.3.0 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 5.0.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mINFO     Loading ignores from .gitignore[0m
[2mINFO     Excluded: .DS_Store[0m
[2mINFO     Excluded: .ansible/collections[0m
[2mINFO     Excluded: .git[0m
[2mINFO     Loading ignores from create-VM/vps/.gitignore[0m
[2mINFO     Excluded: create-VM/vps/cloud-init.yaml[0m
[2mINFO     Excluded: infra/gitops/collections[0m
[2mINFO     Loading ignores from infra/k8s_ansible/.gitignore[0m
[2mINFO     Excluded: infra/k8s_ansible/.ansible/collections[0m
[2mINFO     Excluded: infra/k8s_ansible/.vault_pass.txt[0m
[2mINFO     Excluded: infra/k8s_ansible/.venv[0m
[2mINFO     Excluded: infra/k8s_ansible/collections[0m
[2mINFO     Excluded: infra/k8s_ansible/inventory.ini[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/containerd/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/users-config/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/vault/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/secrets[0m
[2mINFO     Excluded: out[0m
[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 2, column 1, found a duplicate dict key (resources). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mINFO     Collection paths was patched to include extra directories /Users/loicgourmelon/.ansible/collections,/usr/share/ansible/collections,/Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages[0m
[2mINFO     Set ANSIBLE_LIBRARY=/Users/loicgourmelon/Devops/nudger/.ansible/modules:/Users/loicgourmelon/.ansible/plugins/modules:/usr/share/ansible/plugins/modules[0m
[2mINFO     Set ANSIBLE_COLLECTIONS_PATH=/Users/loicgourmelon/Devops/nudger/.ansible/collections:/Users/loicgourmelon/.ansible/collections:/usr/share/ansible/collections:/Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages[0m
[2mINFO     Set ANSIBLE_ROLES_PATH=/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles[0m
[2mWARNING  Another version of 'ansible.posix' 1.6.2 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 2.1.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mWARNING  Another version of 'community.general' 10.7.3 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 11.0.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mWARNING  Another version of 'kubernetes.core' 5.3.0 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 5.0.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 13, column 3, found a duplicate dict key (storageClassName). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 126, column 1, found a duplicate dict key (apiVersion). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 126, column 1, found a duplicate dict key (kind). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 126, column 1, found a duplicate dict key (metadata). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 126, column 1, found a duplicate dict key (spec). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mINFO     Loading ignores from .gitignore[0m
[2mINFO     Excluded: .DS_Store[0m
[2mINFO     Excluded: .ansible/collections[0m
[2mINFO     Excluded: .git[0m
[2mINFO     Loading ignores from create-VM/vps/.gitignore[0m
[2mINFO     Excluded: create-VM/vps/cloud-init.yaml[0m
[2mINFO     Excluded: infra/gitops/collections[0m
[2mINFO     Loading ignores from infra/k8s_ansible/.gitignore[0m
[2mINFO     Excluded: infra/k8s_ansible/.ansible/collections[0m
[2mINFO     Excluded: infra/k8s_ansible/.vault_pass.txt[0m
[2mINFO     Excluded: infra/k8s_ansible/.venv[0m
[2mINFO     Excluded: infra/k8s_ansible/collections[0m
[2mINFO     Excluded: infra/k8s_ansible/inventory.ini[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/containerd/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/users-config/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/vault/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/secrets[0m
[2mINFO     Excluded: out[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/01-bootstrap-devops.yml (0.73s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/03-B-k8s-users.yml (0.73s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/infra_docker.yml (0.74s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/debug.yaml (0.78s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/05-flux.yml (0.84s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/devops (0.84s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/apps_sync (0.85s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/flux_bootstrap (0.96s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/02-infra_containerd.yml (0.83s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/04-gitops_scaffold.yml (0.79s)[0m
[2mINFO     Executing syntax check on playbook infra/gitops/site.yml (0.92s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/kubernetes (0.92s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/vault (0.99s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/docker (0.91s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/06-sync_apps.yml (0.81s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/containerd (1.06s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/nudger.yml (0.82s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/03-kubernetes.yml (0.78s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/03-C-clone_repo_git.yml (0.87s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/gitops_scaffold (0.87s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/common (0.80s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/03-A-vault.yml (0.77s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/users-config (0.86s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/vault-users (0.75s)[0m
[2mERROR    Failed to find 01-bootstrap-devops.yml playbook.[0m
[2mERROR    Failed to find 02-infra_containerd.yml playbook.[0m
[2mERROR    Failed to find 03-kubernetes.yml playbook.[0m
[2mERROR    Failed to find 03-A-vault.yml playbook.[0m
[2mERROR    Failed to find 03-B-k8s-users.yml playbook.[0m
[2mERROR    Failed to find 04-gitops_scaffold.yml playbook.[0m
[2mERROR    Failed to find 05-flux.yml playbook.[0m
[2mERROR    Failed to find 06-sync_apps.yml playbook.[0m
[2mWARNING  Ignored exception from JinjaRule.matchyaml while processing infra/k8s_ansible/group_vars/vault.yml (vars): Expected a dict or a list but got '$ANSIBLE_VAULT;1.1;AES256 65623833363962666235303739396633383763313038343263386230396330666331313835633533 3264346330393331306235323261303630643036666338340a306562386132633066366435633864 32643562393335653637356663343164386562633961373965383635653662393539316634643336 3935383765376662660a656235666436306436353934313566643135326665393431646265363966 36326363363639323339626166343963303736333762366566653564373534383237393334396332 65323636373435303531393737633432313939383861663166376564356564646637373130316535 373033643836356233646133323430306465' of type '<class 'ansible.parsing.yaml.objects.AnsibleUnicode'>'[0m
[2mWARNING  Ignored exception from VariableNamingRule.matchyaml while processing infra/k8s_ansible/group_vars/vault.yml (vars): 'str' object has no attribute 'ansible_pos'[0m
[2mWARNING  Listing 108 violation(s) that are fatal[0m
]8;id=781578;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[comments][0m]8;;\[2m:[0m [91mMissing starting space in comment[0m
[34mcreate-VM/vps/cloud-init-template.yaml[0m:2

]8;id=842030;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[comments][0m]8;;\[2m:[0m [91mMissing starting space in comment[0m
[34mcreate-VM/vps/newcloud-init-template.yaml[0m:1

]8;id=787336;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mcreate-VM/vps/newcloud-init-template.yaml[0m:2

]8;id=254290;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mgitops/apps/nudger-xwiki/base/kustomization.yaml[0m:1

]8;id=426378;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mgitops/apps/nudger-xwiki/overlays/prod/ingress.yaml[0m:1

]8;id=816148;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mgitops/apps/nudger-xwiki/overlays/prod/kustomization.yaml[0m:1

]8;id=244800;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mgitops/apps/nudger-xwiki/overlays/staging/ingress.yaml[0m:1

]8;id=804404;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mgitops/apps/nudger-xwiki/overlays/staging/kustomization.yaml[0m:1

]8;id=411062;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mgitops/clusters/prod/kustomization.yaml[0m:1

]8;id=30450;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mgitops/clusters/staging/kustomization.yaml[0m:1

]8;id=903373;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mgitops/flux-system/gitrepository.yaml[0m:1

]8;id=356546;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mgitops/flux-system/kustomization-prod.yaml[0m:1

]8;id=536769;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mgitops/flux-system/kustomization-staging.yaml[0m:1

]8;id=448337;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[colons][0m]8;;\[2m:[0m [91mToo many spaces after colon[0m
[34minfra/gitops/group_vars/all.yml[0m:9

]8;id=96714;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[colons][0m]8;;\[2m:[0m [91mToo many spaces after colon[0m
[34minfra/gitops/group_vars/all.yml[0m:10

]8;id=807632;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ vault_git_deploy_key_public  | default('') }} -> {{ vault_git_deploy_key_public | default('') }}[0m
[34minfra/gitops/group_vars/all.yml[0m:20 [2mJinja2 template rewrite recommendation: `{{ vault_git_deploy_key_public | default('') }}`.[0m

]8;id=732601;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[colons][0m]8;;\[2m:[0m [91mToo many spaces after colon[0m
[34minfra/gitops/group_vars/all.yml[0m:20

]8;id=791033;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[unknown-module][0m]8;;\[2m:[0m [91mcouldn't resolve module/action 'community.general.dpkg_selections'. This often indicates a misspelling, missing collection, or incorrect module path.[0m
[34minfra/gitops/site.yml[0m:29:7

]8;id=227340;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[play][0m]8;;\[2m:[0m [91mAll plays should be named.[0m
[34minfra/k8s_ansible/debug.yaml[0m:2

]8;id=229370;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/debug.yaml[0m:7 [2mTask/Handler: debug var=deploy_keys.keys()[0m

]8;id=383412;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "resources" in mapping[0m
[34minfra/k8s_ansible/gitops/apps/nudger-xwiki/overlays/lab/kustomization.yaml[0m:7

]8;id=263294;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ vault_git_deploy_key_public  | default('') }} -> {{ vault_git_deploy_key_public | default('') }}[0m
[34minfra/k8s_ansible/group_vars/all.yml[0m:74 [2mJinja2 template rewrite recommendation: `{{ vault_git_deploy_key_public | default('') }}`.[0m

]8;id=212728;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'devops' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/01-bootstrap-devops.yml[0m:15:7

]8;id=394219;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'containerd' was not found in ansible.posix:community.general:ansible.legacy:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/02-infra_containerd.yml[0m:7:7

]8;id=779412;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'vault' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/03-A-vault.yml[0m:6:7

]8;id=951918;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'users-config' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/03-B-k8s-users.yml[0m:8:7

]8;id=400540;https://ansible.readthedocs.io/projects/lint/rules/internal-error/\[1;91minternal-error[0m]8;;\[2m:[0m [91mUnexpected error code 1 from execution of: ansible-playbook -i localhost, --syntax-check infra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:1 [2m[WARNING]: Could not match supplied host pattern, ignoring: k8s_masters[0m
[2mERROR! variable files must contain either a dictionary of variables, or a list of dictionaries. Got: $ANSIBLE_VAULT;1.1;AES256 65623833363962666235303739396633383763313038343263386230396330666331313835633533 3264346330393331306235323261303630643036666338340a306562386132633066366435633864 32643562393335653637356663343164386562633961373965383635653662393539316634643336 3935383765376662660a656235666436306436353934313566643135326665393431646265363966 36326363363639323339626166343963303736333762366566653564373534383237393334396332 65323636373435303531393737633432313939383861663166376564356564646637373130316535 373033643836356233646133323430306465 (<class 'ansible.parsing.yaml.objects.AnsibleUnicode'>)[0m


]8;id=869498;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ users_k8s | selectattr('ssh_public_key','defined') | list }} -> {{ users_k8s | selectattr('ssh_public_key', 'defined') | list }}[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:38 [2mJinja2 template rewrite recommendation: `{{ users_k8s | selectattr('ssh_public_key', 'defined') | list }}`.[0m

]8;id=493329;https://ansible.readthedocs.io/projects/lint/rules/partial-become/\[1;91mpartial-become[task][0m]8;;\[2m:[0m [91m``become_user`` should have a corresponding ``become`` at the play or task level.[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:47 [2mTask/Handler: Ajouter github.com au known_hosts (recommand√©)[0m

]8;id=710793;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ users_k8s | selectattr('git_repos','defined') | selectattr('git_repos','truthy') | list }} -> {{ users_k8s | selectattr('git_repos', 'defined') | selectattr('git_repos', 'truthy') | list }}[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:58 [2mJinja2 template rewrite recommendation: `{{ users_k8s | selectattr('git_repos', 'defined') | selectattr('git_repos', 'truthy') | list }}`.[0m

]8;id=551186;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ users_k8s | selectattr('git_repos','defined') | selectattr('git_repos','truthy') | list }} -> {{ users_k8s | selectattr('git_repos', 'defined') | selectattr('git_repos', 'truthy') | list }}[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:69 [2mJinja2 template rewrite recommendation: `{{ users_k8s | selectattr('git_repos', 'defined') | selectattr('git_repos', 'truthy') | list }}`.[0m

]8;id=597901;https://ansible.readthedocs.io/projects/lint/rules/partial-become/\[1;91mpartial-become[task][0m]8;;\[2m:[0m [91m``become_user`` should have a corresponding ``become`` at the play or task level.[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:94 [2mTask/Handler: Git clone/pull (cl√© d√©di√©e par user)[0m

]8;id=673787;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'kubernetes' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/03-kubernetes.yml[0m:5:7

]8;id=955095;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'gitops_scaffold' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/04-gitops_scaffold.yml[0m:8:7

]8;id=469988;https://ansible.readthedocs.io/projects/lint/rules/internal-error/\[1;91minternal-error[0m]8;;\[2m:[0m [91mUnexpected error code 1 from execution of: ansible-playbook -i localhost, --syntax-check infra/k8s_ansible/playbooks/05-flux.yml[0m
[34minfra/k8s_ansible/playbooks/05-flux.yml[0m:1 [2mERROR! variable files must contain either a dictionary of variables, or a list of dictionaries. Got: $ANSIBLE_VAULT;1.1;AES256 65623833363962666235303739396633383763313038343263386230396330666331313835633533 3264346330393331306235323261303630643036666338340a306562386132633066366435633864 32643562393335653637356663343164386562633961373965383635653662393539316634643336 3935383765376662660a656235666436306436353934313566643135326665393431646265363966 36326363363639323339626166343963303736333762366566653564373534383237393334396332 65323636373435303531393737633432313939383861663166376564356564646637373130316535 373033643836356233646133323430306465 (<class 'ansible.parsing.yaml.objects.AnsibleUnicode'>)[0m


]8;id=42669;https://ansible.readthedocs.io/projects/lint/rules/fqcn/\[1;91mfqcn[keyword][0m]8;;\[2m:[0m [91mAvoid `collections` keyword by using FQCN for all plugins, modules, roles and playbooks.[0m
[34minfra/k8s_ansible/playbooks/05-flux.yml[0m:2

]8;id=595134;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'apps_sync' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/06-sync_apps.yml[0m:11:7

]8;id=723822;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'docker' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/infra_docker.yml[0m:5:7

]8;id=773810;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[comments][0m]8;;\[2m:[0m [91mMissing starting space in comment[0m
[34minfra/k8s_ansible/playbooks/nudger.yml[0m:14

]8;id=13840;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/apps_sync/tasks/00_checks.yml[0m:6 [2mTask/Handler: assert that=['kc.stat.exists', '(kc.stat.size | int) > 0'] fail_msg=kubeconfig {{ kubeconfig_path }} introuvable/vide.[0m

]8;id=817687;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/apps_sync/tasks/03_status.yml[0m:11 [2mTask/Handler: debug var=ks.stdout[0m

]8;id=399385;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/apps_sync/tasks/03_status.yml[0m:20 [2mTask/Handler: debug var=gr.stdout[0m

]8;id=798469;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/apps_sync/tasks/main.yml[0m:2 [2mTask/Handler: import_tasks 00_checks.yml[0m

]8;id=797486;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/apps_sync/tasks/main.yml[0m:3 [2mTask/Handler: import_tasks 01_kustomizations.yml[0m

]8;id=688140;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/apps_sync/tasks/main.yml[0m:4 [2mTask/Handler: import_tasks 02_reconcile.yml[0m

]8;id=345069;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/apps_sync/tasks/main.yml[0m:5 [2mTask/Handler: import_tasks 03_status.yml[0m

]8;id=637013;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/init_master.yml[0m:51 [2mTask/Handler: Recover control-plane phases if manifest missing[0m

]8;id=165247;https://ansible.readthedocs.io/projects/lint/rules/risky-shell-pipe/\[1;91mrisky-shell-pipe[0m]8;;\[2m:[0m [91mShells that use pipes should set the pipefail option.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/init_master.yml[0m:121 [2mTask/Handler: Wait for kube-apiserver to listen on :6443 (local socket)[0m

]8;id=727823;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: set -euo pipefail[0m
[91mfor i in $(seq 1 60); do[0m
[91m  for h in {{ apiserver_probe_hosts | map('regex_replace','[\[\\]]','') | join(' ') }}; do[0m
[91m    if curl -sf      --cacert /etc/kubernetes/pki/ca.crt      --cert   /etc/kubernetes/pki/apiserver-kubelet-client.crt      --key    /etc/kubernetes/pki/apiserver-kubelet-client.key      "https://${h}:6443/readyz" >/dev/null 2>&1; then[0m
[91m      echo ok[0m
[91m      exit 0[0m
[91m    fi[0m
[91m  done[0m
[91m  sleep 2[0m
[91mdone[0m
[91mexit 1[0m
[91m -> set -euo pipefail[0m
[91mfor i in $(seq 1 60); do[0m
[91m  for h in {{ apiserver_probe_hosts | map('regex_replace', '[\[\\]]', '') | join(' ') }}; do[0m
[91m    if curl -sf      --cacert /etc/kubernetes/pki/ca.crt      --cert   /etc/kubernetes/pki/apiserver-kubelet-client.crt      --key    /etc/kubernetes/pki/apiserver-kubelet-client.key      "https://${h}:6443/readyz" >/dev/null 2>&1; then[0m
[91m      echo ok[0m
[91m      exit 0[0m
[91m    fi[0m
[91m  done[0m
[91m  sleep 2[0m
[91mdone[0m
[91mexit 1[0m

[34minfra/k8s_ansible/roles/containerd/tasks/init_master.yml[0m:153 [2mJinja2 template rewrite recommendation: `set -euo pipefail[0m
[2mfor i in $(seq 1 60); do[0m
[2m  for h in {{ apiserver_probe_hosts | map('regex_replace', '[\[\\]]', '') | join(' ') }}; do[0m
[2m    if curl -sf      --cacert /etc/kubernetes/pki/ca.crt      --cert   /etc/kubernetes/pki/apiserver-kubelet-client.crt      --key    /etc/kubernetes/pki/apiserver-kubelet-client.key      "https://${h}:6443/readyz" >/dev/null 2>&1; then[0m
[2m      echo ok[0m
[2m      exit 0[0m
[2m    fi[0m
[2m  done[0m
[2m  sleep 2[0m
[2mdone[0m
[2mexit 1[0m
[2m`.[0m

]8;id=840491;https://ansible.readthedocs.io/projects/lint/rules/risky-shell-pipe/\[1;91mrisky-shell-pipe[0m]8;;\[2m:[0m [91mShells that use pipes should set the pipefail option.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/k8s_packages.yml[0m:72 [2mTask/Handler: Unhold kube packages if held[0m

]8;id=522070;https://ansible.readthedocs.io/projects/lint/rules/package-latest/\[1;91mpackage-latest[0m]8;;\[2m:[0m [91mPackage installs should not use latest.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/k8s_packages.yml[0m:82 [2mTask/Handler: Install/upgrade Kubernetes tools to latest in v1.31 repo[0m

]8;id=207896;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/kube_proxy.yml[0m:28 [2mTask/Handler: Wait for apiserver /readyz (derived host, robust)[0m

]8;id=762547;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/kube_proxy.yml[0m:61 [2mTask/Handler: Rollout restart kube-proxy[0m

]8;id=700002;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/kube_proxy.yml[0m:162 [2mTask/Handler: Rollout restart kube-proxy[0m

]8;id=309083;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/kube_proxy.yml[0m:166 [2mTask/Handler: Wait for kube-proxy rollout[0m

]8;id=26137;https://ansible.readthedocs.io/projects/lint/rules/risky-file-permissions/\[1;91mrisky-file-permissions[0m]8;;\[2m:[0m [91mFile permissions unset or incorrect.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/kubeconfig_user.yml[0m:24 [2mTask/Handler: Ensure KUBECONFIG line in ansible user's .bashrc (for interactive shells)[0m

]8;id=717728;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/main.yml[0m:2 [2mTask/Handler: import_tasks 00_version_facts.yml[0m

]8;id=137326;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/main.yml[0m:3 [2mTask/Handler: import_tasks prep.yml[0m

]8;id=411200;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/main.yml[0m:4 [2mTask/Handler: import_tasks containerd.yml[0m

]8;id=314724;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/main.yml[0m:5 [2mTask/Handler: import_tasks k8s_packages.yml[0m

]8;id=989766;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/main.yml[0m:6 [2mTask/Handler: import_tasks init_master.yml[0m

]8;id=693969;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/main.yml[0m:7 [2mTask/Handler: import_tasks flannel.yml[0m

]8;id=77363;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/main.yml[0m:8 [2mTask/Handler: import_tasks kube_proxy.yml[0m

]8;id=398315;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/main.yml[0m:9 [2mTask/Handler: import_tasks kubeconfig_user.yml[0m

]8;id=512454;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use containerd_ as a prefix. (vars: k8s_packages)[0m
[34minfra/k8s_ansible/roles/containerd/vars/main.yml[0m:4

]8;id=610995;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use containerd_ as a prefix. (vars: sysctl_params)[0m
[34minfra/k8s_ansible/roles/containerd/vars/main.yml[0m:20

]8;id=896686;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use containerd_ as a prefix. (vars: kubeconfig_path)[0m
[34minfra/k8s_ansible/roles/containerd/vars/main.yml[0m:25

]8;id=856008;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use containerd_ as a prefix. (vars: kubeconfig_admin_path)[0m
[34minfra/k8s_ansible/roles/containerd/vars/main.yml[0m:26

]8;id=465139;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ ['https://127.0.0.1:6443', _server_url.stdout | default('')] | reject('equalto','') | unique }} -> {{ ['https://127.0.0.1:6443', _server_url.stdout | default('')] | reject('equalto', '') | unique }}[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/00_pre_wait_api.yml[0m:15 [2mJinja2 template rewrite recommendation: `{{ ['https://127.0.0.1:6443', _server_url.stdout | default('')] | reject('equalto', '') | unique }}`.[0m

]8;id=851031;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[template][0m]8;;\[2m:[0m [91mJinja templates should only be at the end of 'name'[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/02_namespace.yml[0m:2 [2mTask/Handler: Ensure {{ flux_namespace | default('flux-system') }} namespace exists[0m

]8;id=233372;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/04_install_controllers.yml[0m:10 [2mTask/Handler: Untaint control-plane on single-node (no-op if already untainted)[0m

]8;id=558400;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/05_git_repository.yml[0m:27 [2mTask/Handler: debug msg={{ reco_src.stdout | default('no output') }}[0m

]8;id=504155;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/07_status.yml[0m:2 [2mTask/Handler: Get Kustomizations[0m

]8;id=960562;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/07_status.yml[0m:7 [2mTask/Handler: debug var=ks.stdout[0m

]8;id=781388;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/07_status.yml[0m:8 [2mTask/Handler: Get GitRepositories[0m

]8;id=108921;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/07_status.yml[0m:13 [2mTask/Handler: debug var=gr.stdout[0m

]8;id=748298;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/main.yml[0m:5 [2mTask/Handler: import_tasks 00_prereqs.yml[0m

]8;id=169014;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/main.yml[0m:15 [2mTask/Handler: import_tasks 00_pre_wait_api.yml[0m

]8;id=33628;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/main.yml[0m:16 [2mTask/Handler: import_tasks 01_install_cli.yml[0m

]8;id=822862;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/main.yml[0m:17 [2mTask/Handler: import_tasks 02_namespace.yml[0m

]8;id=185200;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/main.yml[0m:18 [2mTask/Handler: import_tasks 03_secret.yml[0m

]8;id=215692;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/main.yml[0m:19 [2mTask/Handler: import_tasks 04_install_controllers.yml[0m

]8;id=624538;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/main.yml[0m:20 [2mTask/Handler: import_tasks 05_git_repository.yml[0m

]8;id=890065;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/main.yml[0m:21 [2mTask/Handler: import_tasks 06_kustomizations.yml[0m

]8;id=721616;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/main.yml[0m:22 [2mTask/Handler: import_tasks 07_status.yml[0m

]8;id=960235;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use kubernetes_ as a prefix. (vars: docker_dependencies)[0m
[34minfra/k8s_ansible/roles/kubernetes/vars/main.yml[0m:3

]8;id=571244;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use kubernetes_ as a prefix. (vars: docker_gpg_key)[0m
[34minfra/k8s_ansible/roles/kubernetes/vars/main.yml[0m:9

]8;id=29413;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use kubernetes_ as a prefix. (vars: docker_repo)[0m
[34minfra/k8s_ansible/roles/kubernetes/vars/main.yml[0m:10

]8;id=337678;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use kubernetes_ as a prefix. (vars: docker_packages)[0m
[34minfra/k8s_ansible/roles/kubernetes/vars/main.yml[0m:12

]8;id=590679;https://ansible.readthedocs.io/projects/lint/rules/role-name/\[1;91mrole-name[0m]8;;\[2m:[0m [91mRole name users-config does not match ``^[a-z][a-z0-9_]*$`` pattern.[0m
[34minfra/k8s_ansible/roles/users-config[0m:1

]8;id=818084;https://ansible.readthedocs.io/projects/lint/rules/fqcn/\[1;91mfqcn[canonical][0m]8;;\[2m:[0m [91mYou should use canonical module name `ansible.posix.authorized_key` instead of `ansible.builtin.authorized_key`.[0m
[34minfra/k8s_ansible/roles/users-config/tasks/main.yml[0m:72 [2mTask/Handler: Add SSH authorized keys (list)[0m

]8;id=893810;https://ansible.readthedocs.io/projects/lint/rules/fqcn/\[1;91mfqcn[canonical][0m]8;;\[2m:[0m [91mYou should use canonical module name `ansible.posix.authorized_key` instead of `ansible.builtin.authorized_key`.[0m
[34minfra/k8s_ansible/roles/users-config/tasks/main.yml[0m:82 [2mTask/Handler: Add SSH authorized key (single)[0m

]8;id=482194;https://ansible.readthedocs.io/projects/lint/rules/role-name/\[1;91mrole-name[0m]8;;\[2m:[0m [91mRole name vault-users does not match ``^[a-z][a-z0-9_]*$`` pattern.[0m
[34minfra/k8s_ansible/roles/vault-users[0m:1

]8;id=708215;https://ansible.readthedocs.io/projects/lint/rules/command-instead-of-module/\[1;91mcommand-instead-of-module[0m]8;;\[2m:[0m [91msystemctl used in place of systemd module[0m
[34minfra/k8s_ansible/roles/vault/tasks/main.yml[0m:64 [2mTask/Handler: Reload systemd[0m

]8;id=122196;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/vault/tasks/main.yml[0m:64 [2mTask/Handler: Reload systemd[0m

]8;id=900579;https://ansible.readthedocs.io/projects/lint/rules/literal-compare/\[1;91mliteral-compare[0m]8;;\[2m:[0m [91mDon't compare to literal True/False.[0m
[34minfra/k8s_ansible/roles/vault/tasks/main.yml[0m:89 [2mTask/Handler: Initialize Vault only if not initialized[0m

]8;id=13634;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/vault/tasks/main.yml[0m:89 [2mTask/Handler: Initialize Vault only if not initialized[0m

]8;id=500369;https://ansible.readthedocs.io/projects/lint/rules/risky-file-permissions/\[1;91mrisky-file-permissions[0m]8;;\[2m:[0m [91mFile permissions unset or incorrect.[0m
[34minfra/k8s_ansible/roles/vault/tasks/main.yml[0m:197 [2mTask/Handler: Create flag file so the task is idempotent (optional)[0m

]8;id=869959;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:2

]8;id=870270;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "storageclassname" in mapping[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:18

]8;id=404957;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "apiversion" in mapping[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:156

]8;id=374729;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "kind" in mapping[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:157

]8;id=188568;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "metadata" in mapping[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:158

]8;id=641962;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "spec" in mapping[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:163

]8;id=372696;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[indentation][0m]8;;\[2m:[0m [91mWrong indentation: expected 4 but found 2[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:166

]8;id=148326;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[indentation][0m]8;;\[2m:[0m [91mWrong indentation: expected 8 but found 6[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:169

]8;id=847348;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[comments][0m]8;;\[2m:[0m [91mMissing starting space in comment[0m
[34mscripts/cloud-init.yaml[0m:1

]8;id=620172;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mscripts/cloud-init.yaml[0m:2

Read ]8;id=809800;https://ansible.readthedocs.io/projects/lint/configuring/#ignoring-rules-for-entire-files\documentation]8;;\ for instructions on how to ignore specific rule violations.

[3m                          Rule Violation Summary                          [0m
[1m [0m[1mcount[0m[1m [0m[1mtag                         [0m[1m [0m[1mprofile   [0m[1m [0m[1mrule associated tags      [0m[1m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=903447;https://ansible.readthedocs.io/projects/lint/rules/internal-error\[31minternal-error[0m]8;;\[31m              [0m[31m [0m[31mmin       [0m[31m [0m[31mcore                      [0m[31m [0m
[31m [0m[31m    8[0m[31m [0m]8;id=297322;https://ansible.readthedocs.io/projects/lint/rules/syntax-check\[31msyntax-check[specific][0m]8;;\[31m      [0m[31m [0m[31mmin       [0m[31m [0m[31mcore, unskippable         [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=90133;https://ansible.readthedocs.io/projects/lint/rules/syntax-check\[31msyntax-check[unknown-module][0m]8;;\[31m [0m[31mmin       [0m[31m [0m[31mcore, unskippable         [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=633640;https://ansible.readthedocs.io/projects/lint/rules/command-instead-of-module\[31mcommand-instead-of-module[0m]8;;\[31m   [0m[31m [0m[31mbasic     [0m[31m [0m[31mcommand-shell, idiom      [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=948067;https://ansible.readthedocs.io/projects/lint/rules/literal-compare\[31mliteral-compare[0m]8;;\[31m             [0m[31m [0m[31mbasic     [0m[31m [0m[31midiom                     [0m[31m [0m
[31m [0m[31m    7[0m[31m [0m]8;id=576425;https://ansible.readthedocs.io/projects/lint/rules/jinja\[31mjinja[spacing][0m]8;;\[31m              [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting                [0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=256186;https://ansible.readthedocs.io/projects/lint/rules/partial-become\[31mpartial-become[task][0m]8;;\[31m        [0m[31m [0m[31mbasic     [0m[31m [0m[31munpredictability          [0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=736126;https://ansible.readthedocs.io/projects/lint/rules/role-name\[31mrole-name[0m]8;;\[31m                   [0m[31m [0m[31mbasic     [0m[31m [0m[31mdeprecations, metadata    [0m[31m [0m
[31m [0m[31m   28[0m[31m [0m]8;id=278577;https://ansible.readthedocs.io/projects/lint/rules/name\[31mname[missing][0m]8;;\[31m               [0m[31m [0m[31mbasic     [0m[31m [0m[31midiom                     [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=226631;https://ansible.readthedocs.io/projects/lint/rules/name\[31mname[play][0m]8;;\[31m                  [0m[31m [0m[31mbasic     [0m[31m [0m[31midiom                     [0m[31m [0m
[31m [0m[31m    8[0m[31m [0m]8;id=354510;https://ansible.readthedocs.io/projects/lint/rules/var-naming\[31mvar-naming[no-role-prefix][0m]8;;\[31m  [0m[31m [0m[31mbasic     [0m[31m [0m[31midiom                     [0m[31m [0m
[31m [0m[31m    3[0m[31m [0m]8;id=450655;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[colons][0m]8;;\[31m                [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m    4[0m[31m [0m]8;id=15395;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[comments][0m]8;;\[31m              [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m   13[0m[31m [0m]8;id=754210;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[document-start][0m]8;;\[31m        [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=162173;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[indentation][0m]8;;\[31m           [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m    6[0m[31m [0m]8;id=658146;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[key-duplicates][0m]8;;\[31m        [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=200052;https://ansible.readthedocs.io/projects/lint/rules/name\[31mname[template][0m]8;;\[31m              [0m[31m [0m[31mmoderate  [0m[31m [0m[31midiom                     [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=194852;https://ansible.readthedocs.io/projects/lint/rules/package-latest\[31mpackage-latest[0m]8;;\[31m              [0m[31m [0m[31msafety    [0m[31m [0m[31midempotency               [0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=883487;https://ansible.readthedocs.io/projects/lint/rules/risky-file-permissions\[31mrisky-file-permissions[0m]8;;\[31m      [0m[31m [0m[31msafety    [0m[31m [0m[31munpredictability          [0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=30863;https://ansible.readthedocs.io/projects/lint/rules/risky-shell-pipe\[31mrisky-shell-pipe[0m]8;;\[31m            [0m[31m [0m[31msafety    [0m[31m [0m[31mcommand-shell             [0m[31m [0m
[31m [0m[31m   10[0m[31m [0m]8;id=922846;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when\[31mno-changed-when[0m]8;;\[31m             [0m[31m [0m[31mshared    [0m[31m [0m[31mcommand-shell, idempotency[0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=152068;https://ansible.readthedocs.io/projects/lint/rules/fqcn\[31mfqcn[canonical][0m]8;;\[31m             [0m[31m [0m[31mproduction[0m[31m [0m[31mformatting                [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=378272;https://ansible.readthedocs.io/projects/lint/rules/fqcn\[31mfqcn[keyword][0m]8;;\[31m               [0m[31m [0m[31mproduction[0m[31m [0m[31mformatting                [0m[31m [0m

[1;31mFailed[0m: [1;36m108[0m [1;35mfailure[0m[1m([0ms[1m)[0m, [1;36m0[0m [1;35mwarning[0m[1m([0ms[1m)[0m on [1;36m184[0m files. Profile [32m'production'[0m was required.

Detect secrets.......................................(no files to check)Skipped
[INFO] Restored changes from /Users/loicgourmelon/.cache/pre-commit/patch1756640126-85065.
