check for merge conflicts................................................Failed
- hook id: check-merge-conflict
- files were modified by this hook
fix end of files.........................................................Failed
- hook id: end-of-file-fixer
- exit code: 1
- files were modified by this hook

Fixing commit.log

trim trailing whitespace.................................................Failed
- hook id: trailing-whitespace
- files were modified by this hook
check yaml...............................................................Failed
- hook id: check-yaml
- files were modified by this hook
mixed line ending........................................................Failed
- hook id: mixed-line-ending
- files were modified by this hook
black................................................(no files to check)Skipped
yamllint.................................................................Failed
- hook id: yamllint
- exit code: 1
- files were modified by this hook

infra/k8s_ansible/roles/gitops_scaffold/defaults/main.yml
  8:81      error    line too long (108 > 80 characters)  (line-length)

Ansible-lint.............................................................Failed
- hook id: ansible-lint
- exit code: 2
- files were modified by this hook

[2mINFO     Identified [0m[2;34m/Users/loicgourmelon/Devops/nudger[0m[2m as project root due [0m[1;2m.git directory[0m[2m.[0m
[2mINFO     Collection paths was patched to include extra directories /Users/loicgourmelon/.ansible/collections,/usr/share/ansible/collections,/Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages[0m
[2mINFO     Set ANSIBLE_LIBRARY=/Users/loicgourmelon/Devops/nudger/.ansible/modules:/Users/loicgourmelon/.ansible/plugins/modules:/usr/share/ansible/plugins/modules[0m
[2mINFO     Set ANSIBLE_COLLECTIONS_PATH=/Users/loicgourmelon/Devops/nudger/.ansible/collections:/Users/loicgourmelon/.ansible/collections:/usr/share/ansible/collections:/Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages[0m
[2mINFO     Set ANSIBLE_ROLES_PATH=/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles[0m
[2mWARNING  Another version of 'ansible.posix' 1.6.2 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 2.1.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mWARNING  Another version of 'community.general' 10.7.3 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 11.0.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mWARNING  Another version of 'kubernetes.core' 5.3.0 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 5.0.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mINFO     Loading ignores from .gitignore[0m
[2mINFO     Excluded: .DS_Store[0m
[2mINFO     Excluded: .ansible/collections[0m
[2mINFO     Excluded: .git[0m
[2mINFO     Loading ignores from create-VM/vps/.gitignore[0m
[2mINFO     Excluded: create-VM/vps/cloud-init.yaml[0m
[2mINFO     Excluded: infra/gitops/collections[0m
[2mINFO     Loading ignores from infra/k8s_ansible/.gitignore[0m
[2mINFO     Excluded: infra/k8s_ansible/.vault_pass.txt[0m
[2mINFO     Excluded: infra/k8s_ansible/.venv[0m
[2mINFO     Excluded: infra/k8s_ansible/collections[0m
[2mINFO     Excluded: infra/k8s_ansible/inventory.ini[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/containerd/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/users-config/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/vault/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/secrets[0m
[2mINFO     Excluded: out[0m
[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 1, column 1, found a duplicate dict key (resources). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mINFO     Collection paths was patched to include extra directories /Users/loicgourmelon/.ansible/collections,/usr/share/ansible/collections,/Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages[0m
[2mINFO     Set ANSIBLE_LIBRARY=/Users/loicgourmelon/Devops/nudger/.ansible/modules:/Users/loicgourmelon/.ansible/plugins/modules:/usr/share/ansible/plugins/modules[0m
[2mINFO     Set ANSIBLE_COLLECTIONS_PATH=/Users/loicgourmelon/Devops/nudger/.ansible/collections:/Users/loicgourmelon/.ansible/collections:/usr/share/ansible/collections:/Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages[0m
[2mINFO     Set ANSIBLE_ROLES_PATH=/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles[0m
[2mWARNING  Another version of 'ansible.posix' 1.6.2 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 2.1.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mWARNING  Another version of 'community.general' 10.7.3 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 11.0.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mWARNING  Another version of 'kubernetes.core' 5.3.0 was found installed in /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible_collections, only the first one will be used, 5.0.0 (/Users/loicgourmelon/.ansible/collections/ansible_collections).[0m
[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 13, column 3, found a duplicate dict key (storageClassName). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 126, column 1, found a duplicate dict key (apiVersion). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 126, column 1, found a duplicate dict key (kind). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 126, column 1, found a duplicate dict key (metadata). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mWARNING  /Users/loicgourmelon/.cache/pre-commit/repo2y4u2pm2/py_env-python3.13/lib/python3.13/site-packages/ansible/parsing/yaml/constructor.py:74: AnsibleWarning: While constructing a mapping from <unicode string>, line 126, column 1, found a duplicate dict key (spec). Using last defined value only.[0m
[2m  display.warning(msg)[0m

[2mINFO     Loading ignores from .gitignore[0m
[2mINFO     Excluded: .DS_Store[0m
[2mINFO     Excluded: .ansible/collections[0m
[2mINFO     Excluded: .git[0m
[2mINFO     Loading ignores from create-VM/vps/.gitignore[0m
[2mINFO     Excluded: create-VM/vps/cloud-init.yaml[0m
[2mINFO     Excluded: infra/gitops/collections[0m
[2mINFO     Loading ignores from infra/k8s_ansible/.gitignore[0m
[2mINFO     Excluded: infra/k8s_ansible/.vault_pass.txt[0m
[2mINFO     Excluded: infra/k8s_ansible/.venv[0m
[2mINFO     Excluded: infra/k8s_ansible/collections[0m
[2mINFO     Excluded: infra/k8s_ansible/inventory.ini[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/containerd/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/users-config/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/roles/vault/templates[0m
[2mINFO     Excluded: infra/k8s_ansible/secrets[0m
[2mINFO     Excluded: out[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/06-sync_apps.yml (0.75s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/03-kubernetes.yml (0.76s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/03-B-k8s-users.yml (0.76s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/nudger.yml (0.76s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/03-C-clone_repo_git.yml (0.82s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/docker (0.82s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/vault (0.85s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/containerd (0.98s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/01-bootstrap-devops.yml (0.74s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/04-gitops_scaffold.yml (0.74s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/02-infra_containerd.yml (0.79s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/03-A-vault.yml (0.75s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/kubernetes (0.84s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/common (0.77s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/flux_bootstrap (0.92s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/devops (0.82s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/infra_docker.yml (0.75s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/apps_sync (0.84s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/vault-users (0.80s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/gitops_scaffold (0.81s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/debug.yaml (0.77s)[0m
[2mINFO     Executing syntax check on role infra/k8s_ansible/roles/users-config (0.82s)[0m
[2mINFO     Executing syntax check on playbook infra/k8s_ansible/playbooks/05-flux.yml (0.68s)[0m
[2mINFO     Executing syntax check on playbook infra/gitops/site.yml (0.76s)[0m
[2mERROR    Failed to find 01-bootstrap-devops.yml playbook.[0m
[2mERROR    Failed to find 02-infra_containerd.yml playbook.[0m
[2mERROR    Failed to find 03-kubernetes.yml playbook.[0m
[2mERROR    Failed to find 03-A-vault.yml playbook.[0m
[2mERROR    Failed to find 03-B-k8s-users.yml playbook.[0m
[2mERROR    Failed to find 04-gitops_scaffold.yml playbook.[0m
[2mERROR    Failed to find 05-flux.yml playbook.[0m
[2mERROR    Failed to find 06-sync_apps.yml playbook.[0m
[2mWARNING  Ignored exception from JinjaRule.matchyaml while processing infra/k8s_ansible/group_vars/vault.yml (vars): A vault password must be specified to decrypt data in file /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/group_vars/vault.yml[0m
[2mWARNING  Ignored exception from VariableNamingRule.matchyaml while processing infra/k8s_ansible/group_vars/vault.yml (vars): A vault password must be specified to decrypt data in file /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/group_vars/vault.yml[0m
[2mWARNING  Listing 94 violation(s) that are fatal[0m
]8;id=409539;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[comments][0m]8;;\[2m:[0m [91mMissing starting space in comment[0m
[34mcreate-VM/vps/cloud-init-template.yaml[0m:2

]8;id=117582;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[comments][0m]8;;\[2m:[0m [91mMissing starting space in comment[0m
[34mcreate-VM/vps/newcloud-init-template.yaml[0m:1

]8;id=680994;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mcreate-VM/vps/newcloud-init-template.yaml[0m:2

]8;id=718652;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[colons][0m]8;;\[2m:[0m [91mToo many spaces after colon[0m
[34minfra/gitops/group_vars/all.yml[0m:9

]8;id=725265;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[colons][0m]8;;\[2m:[0m [91mToo many spaces after colon[0m
[34minfra/gitops/group_vars/all.yml[0m:10

]8;id=778852;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ vault_git_deploy_key_public  | default('') }} -> {{ vault_git_deploy_key_public | default('') }}[0m
[34minfra/gitops/group_vars/all.yml[0m:20 [2mJinja2 template rewrite recommendation: `{{ vault_git_deploy_key_public | default('') }}`.[0m

]8;id=897535;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[colons][0m]8;;\[2m:[0m [91mToo many spaces after colon[0m
[34minfra/gitops/group_vars/all.yml[0m:20

]8;id=471362;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[unknown-module][0m]8;;\[2m:[0m [91mcouldn't resolve module/action 'community.general.dpkg_selections'. This often indicates a misspelling, missing collection, or incorrect module path.[0m
[34minfra/gitops/site.yml[0m:29:7

]8;id=468305;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[play][0m]8;;\[2m:[0m [91mAll plays should be named.[0m
[34minfra/k8s_ansible/debug.yaml[0m:2

]8;id=794738;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/debug.yaml[0m:7 [2mTask/Handler: debug var=deploy_keys.keys()[0m

]8;id=424005;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34minfra/k8s_ansible/gitops/apps/nudger-xwiki/base/kustomization.yaml[0m:1

]8;id=580710;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34minfra/k8s_ansible/gitops/apps/nudger-xwiki/overlays/lab/ingress.yaml[0m:1

]8;id=194193;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34minfra/k8s_ansible/gitops/apps/nudger-xwiki/overlays/lab/kustomization.yaml[0m:1

]8;id=863998;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "resources" in mapping[0m
[34minfra/k8s_ansible/gitops/apps/nudger-xwiki/overlays/lab/kustomization.yaml[0m:6

]8;id=307175;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34minfra/k8s_ansible/gitops/clusters/lab/kustomization.yaml[0m:1

]8;id=336073;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34minfra/k8s_ansible/gitops/flux-system/gitrepository.yaml[0m:1

]8;id=329288;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34minfra/k8s_ansible/gitops/flux-system/kustomization-lab.yaml[0m:1

]8;id=451102;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ vault_git_deploy_key_public  | default('') }} -> {{ vault_git_deploy_key_public | default('') }}[0m
[34minfra/k8s_ansible/group_vars/all.yml[0m:73 [2mJinja2 template rewrite recommendation: `{{ vault_git_deploy_key_public | default('') }}`.[0m

]8;id=358440;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[empty-lines][0m]8;;\[2m:[0m [91mToo many blank lines (1 > 0)[0m
[34minfra/k8s_ansible/group_vars/all.yml[0m:96

]8;id=914747;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34minfra/k8s_ansible/group_vars/vault.yml[0m:1

]8;id=286018;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'devops' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/01-bootstrap-devops.yml[0m:15:7

]8;id=19842;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'containerd' was not found in ansible.posix:community.general:ansible.legacy:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/02-infra_containerd.yml[0m:7:7

]8;id=521127;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'vault' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/03-A-vault.yml[0m:6:7

]8;id=548382;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'users-config' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/03-B-k8s-users.yml[0m:8:7

]8;id=272797;https://ansible.readthedocs.io/projects/lint/rules/internal-error/\[1;91minternal-error[0m]8;;\[2m:[0m [91mUnexpected error code 1 from execution of: ansible-playbook -i localhost, --syntax-check infra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:1 [2m[WARNING]: Could not match supplied host pattern, ignoring: k8s_masters[0m
[2mERROR! Attempting to decrypt but no vault secrets found[0m


]8;id=714545;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ users_k8s | selectattr('ssh_public_key','defined') | list }} -> {{ users_k8s | selectattr('ssh_public_key', 'defined') | list }}[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:38 [2mJinja2 template rewrite recommendation: `{{ users_k8s | selectattr('ssh_public_key', 'defined') | list }}`.[0m

]8;id=20930;https://ansible.readthedocs.io/projects/lint/rules/partial-become/\[1;91mpartial-become[task][0m]8;;\[2m:[0m [91m``become_user`` should have a corresponding ``become`` at the play or task level.[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:47 [2mTask/Handler: Ajouter github.com au known_hosts (recommandé)[0m

]8;id=439039;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ users_k8s | selectattr('git_repos','defined') | selectattr('git_repos','truthy') | list }} -> {{ users_k8s | selectattr('git_repos', 'defined') | selectattr('git_repos', 'truthy') | list }}[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:58 [2mJinja2 template rewrite recommendation: `{{ users_k8s | selectattr('git_repos', 'defined') | selectattr('git_repos', 'truthy') | list }}`.[0m

]8;id=351367;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ users_k8s | selectattr('git_repos','defined') | selectattr('git_repos','truthy') | list }} -> {{ users_k8s | selectattr('git_repos', 'defined') | selectattr('git_repos', 'truthy') | list }}[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:69 [2mJinja2 template rewrite recommendation: `{{ users_k8s | selectattr('git_repos', 'defined') | selectattr('git_repos', 'truthy') | list }}`.[0m

]8;id=450575;https://ansible.readthedocs.io/projects/lint/rules/partial-become/\[1;91mpartial-become[task][0m]8;;\[2m:[0m [91m``become_user`` should have a corresponding ``become`` at the play or task level.[0m
[34minfra/k8s_ansible/playbooks/03-C-clone_repo_git.yml[0m:94 [2mTask/Handler: Git clone/pull (clé dédiée par user)[0m

]8;id=635743;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'kubernetes' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/03-kubernetes.yml[0m:15:7

]8;id=667489;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'gitops_scaffold' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/04-gitops_scaffold.yml[0m:8:7

]8;id=827018;https://ansible.readthedocs.io/projects/lint/rules/internal-error/\[1;91minternal-error[0m]8;;\[2m:[0m [91mUnexpected error code 1 from execution of: ansible-playbook -i localhost, --syntax-check infra/k8s_ansible/playbooks/05-flux.yml[0m
[34minfra/k8s_ansible/playbooks/05-flux.yml[0m:1 [2mERROR! Attempting to decrypt but no vault secrets found[0m


]8;id=184287;https://ansible.readthedocs.io/projects/lint/rules/fqcn/\[1;91mfqcn[keyword][0m]8;;\[2m:[0m [91mAvoid `collections` keyword by using FQCN for all plugins, modules, roles and playbooks.[0m
[34minfra/k8s_ansible/playbooks/05-flux.yml[0m:2

]8;id=177427;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'apps_sync' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/06-sync_apps.yml[0m:11:7

]8;id=943513;https://ansible.readthedocs.io/projects/lint/rules/syntax-check/\[1;91msyntax-check[specific][0m]8;;\[2m:[0m [91mthe role 'docker' was not found in /Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks/roles:/Users/loicgourmelon/Devops/nudger/.ansible/roles:/Users/loicgourmelon/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/loicgourmelon/Devops/nudger/infra/k8s_ansible/playbooks[0m
[34minfra/k8s_ansible/playbooks/infra_docker.yml[0m:5:7

]8;id=964574;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[comments][0m]8;;\[2m:[0m [91mMissing starting space in comment[0m
[34minfra/k8s_ansible/playbooks/nudger.yml[0m:14

]8;id=885632;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/apps_sync/tasks/00_checks.yml[0m:6 [2mTask/Handler: assert that=['kc.stat.exists', '(kc.stat.size | int) > 0'] fail_msg=kubeconfig {{ kubeconfig_path }} introuvable/vide.[0m

]8;id=59745;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/apps_sync/tasks/03_status.yml[0m:11 [2mTask/Handler: debug var=ks.stdout[0m

]8;id=591460;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/apps_sync/tasks/03_status.yml[0m:20 [2mTask/Handler: debug var=gr.stdout[0m

]8;id=131016;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[empty-lines][0m]8;;\[2m:[0m [91mToo many blank lines (1 > 0)[0m
[34minfra/k8s_ansible/roles/containerd/tasks/flannel.yml[0m:81

]8;id=423266;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[colons][0m]8;;\[2m:[0m [91mToo many spaces after colon[0m
[34minfra/k8s_ansible/roles/containerd/tasks/init_master.yml[0m:28

]8;id=691962;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/init_master.yml[0m:58 [2mTask/Handler: Recover control-plane phases if manifest missing[0m

]8;id=283741;https://ansible.readthedocs.io/projects/lint/rules/risky-shell-pipe/\[1;91mrisky-shell-pipe[0m]8;;\[2m:[0m [91mShells that use pipes should set the pipefail option.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/init_master.yml[0m:144 [2mTask/Handler: Wait for kube-apiserver to listen on :6443 (local socket)[0m

]8;id=522622;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: set -euo pipefail[0m
[91mfor i in $(seq 1 60); do[0m
[91m  for h in {{ apiserver_probe_hosts | map('regex_replace','[\[\\]]','') | join(' ') }}; do[0m
[91m    if curl -sf      --cacert /etc/kubernetes/pki/ca.crt      --cert   /etc/kubernetes/pki/apiserver-kubelet-client.crt      --key    /etc/kubernetes/pki/apiserver-kubelet-client.key      "https://${h}:6443/readyz" >/dev/null 2>&1; then[0m
[91m      echo ok[0m
[91m      exit 0[0m
[91m    fi[0m
[91m  done[0m
[91m  sleep 2[0m
[91mdone[0m
[91mexit 1[0m
[91m -> set -euo pipefail[0m
[91mfor i in $(seq 1 60); do[0m
[91m  for h in {{ apiserver_probe_hosts | map('regex_replace', '[\[\\]]', '') | join(' ') }}; do[0m
[91m    if curl -sf      --cacert /etc/kubernetes/pki/ca.crt      --cert   /etc/kubernetes/pki/apiserver-kubelet-client.crt      --key    /etc/kubernetes/pki/apiserver-kubelet-client.key      "https://${h}:6443/readyz" >/dev/null 2>&1; then[0m
[91m      echo ok[0m
[91m      exit 0[0m
[91m    fi[0m
[91m  done[0m
[91m  sleep 2[0m
[91mdone[0m
[91mexit 1[0m

[34minfra/k8s_ansible/roles/containerd/tasks/init_master.yml[0m:176 [2mJinja2 template rewrite recommendation: `set -euo pipefail[0m
[2mfor i in $(seq 1 60); do[0m
[2m  for h in {{ apiserver_probe_hosts | map('regex_replace', '[\[\\]]', '') | join(' ') }}; do[0m
[2m    if curl -sf      --cacert /etc/kubernetes/pki/ca.crt      --cert   /etc/kubernetes/pki/apiserver-kubelet-client.crt      --key    /etc/kubernetes/pki/apiserver-kubelet-client.key      "https://${h}:6443/readyz" >/dev/null 2>&1; then[0m
[2m      echo ok[0m
[2m      exit 0[0m
[2m    fi[0m
[2m  done[0m
[2m  sleep 2[0m
[2mdone[0m
[2mexit 1[0m
[2m`.[0m

]8;id=954163;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ (k8s_version.split('.')[0:2] | join('.')) if (k8s_version is defined and (k8s_version|length)>0) else '1.31' }} -> {{ (k8s_version.split('.')[0:2] | join('.')) if (k8s_version is defined and (k8s_version | length) > 0) else '1.31' }}[0m
[34minfra/k8s_ansible/roles/containerd/tasks/k8s_packages.yml[0m:7 [2mJinja2 template rewrite recommendation: `{{ (k8s_version.split('.')[0:2] | join('.')) if (k8s_version is defined and (k8s_version | length) > 0) else '1.31' }}`.[0m

]8;id=508375;https://ansible.readthedocs.io/projects/lint/rules/fqcn/\[1;91mfqcn[action-core][0m]8;;\[2m:[0m [91mUse FQCN for builtin module actions (debug).[0m
[34minfra/k8s_ansible/roles/containerd/tasks/k8s_packages.yml[0m:105 [2mUse `ansible.builtin.debug` or `ansible.legacy.debug` instead.[0m

]8;id=187923;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/k8s_packages.yml[0m:105 [2mTask/Handler: debug msg={'k8s_version': '{{ k8s_version }}', 'k8s_minor_local': '{{ k8s_minor_local }}', 'key_url': 'https://pkgs.k8s.io/core:/stable:/v{{ k8s_minor_local }}/deb/Release.key', '__line__': 107, '__file__': PosixPath('infra/k8s_ansible/roles/containerd/tasks/k8s_packages.yml')}[0m

]8;id=832715;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[commas][0m]8;;\[2m:[0m [91mToo few spaces after comma[0m
[34minfra/k8s_ansible/roles/containerd/tasks/k8s_packages.yml[0m:110

]8;id=409691;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/kube_proxy.yml[0m:28 [2mTask/Handler: Wait for apiserver /readyz (derived host, robust)[0m

]8;id=689332;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/kube_proxy.yml[0m:61 [2mTask/Handler: Rollout restart kube-proxy[0m

]8;id=863423;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/kube_proxy.yml[0m:162 [2mTask/Handler: Rollout restart kube-proxy[0m

]8;id=458491;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/kube_proxy.yml[0m:166 [2mTask/Handler: Wait for kube-proxy rollout[0m

]8;id=459402;https://ansible.readthedocs.io/projects/lint/rules/risky-file-permissions/\[1;91mrisky-file-permissions[0m]8;;\[2m:[0m [91mFile permissions unset or incorrect.[0m
[34minfra/k8s_ansible/roles/containerd/tasks/kubeconfig_user.yml[0m:24 [2mTask/Handler: Ensure KUBECONFIG line in ansible user's .bashrc (for interactive shells)[0m

]8;id=18441;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use containerd_ as a prefix. (vars: k8s_packages)[0m
[34minfra/k8s_ansible/roles/containerd/vars/main.yml[0m:4

]8;id=888460;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use containerd_ as a prefix. (vars: sysctl_params)[0m
[34minfra/k8s_ansible/roles/containerd/vars/main.yml[0m:20

]8;id=732051;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use containerd_ as a prefix. (vars: kubeconfig_path)[0m
[34minfra/k8s_ansible/roles/containerd/vars/main.yml[0m:25

]8;id=676206;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use containerd_ as a prefix. (vars: kubeconfig_admin_path)[0m
[34minfra/k8s_ansible/roles/containerd/vars/main.yml[0m:26

]8;id=576728;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ ['https://127.0.0.1:6443', _server_url.stdout | default('')] | reject('equalto','') | unique }} -> {{ ['https://127.0.0.1:6443', _server_url.stdout | default('')] | reject('equalto', '') | unique }}[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/00_pre_wait_api.yml[0m:15 [2mJinja2 template rewrite recommendation: `{{ ['https://127.0.0.1:6443', _server_url.stdout | default('')] | reject('equalto', '') | unique }}`.[0m

]8;id=626364;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[template][0m]8;;\[2m:[0m [91mJinja templates should only be at the end of 'name'[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/02_namespace.yml[0m:2 [2mTask/Handler: Ensure {{ flux_namespace | default('flux-system') }} namespace exists[0m

]8;id=352194;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/04_install_controllers.yml[0m:10 [2mTask/Handler: Untaint control-plane on single-node (no-op if already untainted)[0m

]8;id=27372;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/05_git_repository.yml[0m:27 [2mTask/Handler: debug msg={{ reco_src.stdout | default('no output') }}[0m

]8;id=486501;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/07_status.yml[0m:2 [2mTask/Handler: Get Kustomizations[0m

]8;id=187857;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/07_status.yml[0m:7 [2mTask/Handler: debug var=ks.stdout[0m

]8;id=20924;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/07_status.yml[0m:8 [2mTask/Handler: Get GitRepositories[0m

]8;id=566981;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/flux_bootstrap/tasks/07_status.yml[0m:13 [2mTask/Handler: debug var=gr.stdout[0m

]8;id=136582;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[trailing-spaces][0m]8;;\[2m:[0m [91mTrailing spaces[0m
[34minfra/k8s_ansible/roles/kubernetes/defaults/main.yml[0m:2

]8;id=278903;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ (k8s_version.split('.')[0:2] | join('.')) if (k8s_version is defined and (k8s_version|length)>0) else '1.31' }} -> {{ (k8s_version.split('.')[0:2] | join('.')) if (k8s_version is defined and (k8s_version | length) > 0) else '1.31' }}[0m
[34minfra/k8s_ansible/roles/kubernetes/tasks/main.yml[0m:4 [2mJinja2 template rewrite recommendation: `{{ (k8s_version.split('.')[0:2] | join('.')) if (k8s_version is defined and (k8s_version | length) > 0) else '1.31' }}`.[0m

]8;id=698470;https://ansible.readthedocs.io/projects/lint/rules/fqcn/\[1;91mfqcn[action-core][0m]8;;\[2m:[0m [91mUse FQCN for builtin module actions (debug).[0m
[34minfra/k8s_ansible/roles/kubernetes/tasks/main.yml[0m:5 [2mUse `ansible.builtin.debug` or `ansible.legacy.debug` instead.[0m

]8;id=742932;https://ansible.readthedocs.io/projects/lint/rules/name/\[1;91mname[missing][0m]8;;\[2m:[0m [91mAll tasks should be named.[0m
[34minfra/k8s_ansible/roles/kubernetes/tasks/main.yml[0m:5 [2mTask/Handler: debug msg={'k8s_version': '{{ k8s_version }}', 'k8s_minor_local': '{{ k8s_minor_local }}', '__line__': 7, '__file__': PosixPath('infra/k8s_ansible/roles/kubernetes/tasks/main.yml')}[0m

]8;id=452167;https://ansible.readthedocs.io/projects/lint/rules/jinja/\[1;91mjinja[spacing][0m]8;;\[2m:[0m [91mJinja2 spacing could be improved: {{ (k8s_version.split('.')[0:2] | join('.')) if (k8s_version is defined and (k8s_version|length)>0) else '1.31' }} -> {{ (k8s_version.split('.')[0:2] | join('.')) if (k8s_version is defined and (k8s_version | length) > 0) else '1.31' }}[0m
[34minfra/k8s_ansible/roles/kubernetes/tasks/main.yml[0m:83 [2mJinja2 template rewrite recommendation: `{{ (k8s_version.split('.')[0:2] | join('.')) if (k8s_version is defined and (k8s_version | length) > 0) else '1.31' }}`.[0m

]8;id=17541;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use kubernetes_ as a prefix. (vars: docker_dependencies)[0m
[34minfra/k8s_ansible/roles/kubernetes/vars/main.yml[0m:3

]8;id=952550;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use kubernetes_ as a prefix. (vars: docker_gpg_key)[0m
[34minfra/k8s_ansible/roles/kubernetes/vars/main.yml[0m:9

]8;id=760094;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use kubernetes_ as a prefix. (vars: docker_repo)[0m
[34minfra/k8s_ansible/roles/kubernetes/vars/main.yml[0m:10

]8;id=457911;https://ansible.readthedocs.io/projects/lint/rules/var-naming/\[1;91mvar-naming[no-role-prefix][0m]8;;\[2m:[0m [91mVariables names from within roles should use kubernetes_ as a prefix. (vars: docker_packages)[0m
[34minfra/k8s_ansible/roles/kubernetes/vars/main.yml[0m:12

]8;id=523557;https://ansible.readthedocs.io/projects/lint/rules/role-name/\[1;91mrole-name[0m]8;;\[2m:[0m [91mRole name users-config does not match ``^[a-z][a-z0-9_]*$`` pattern.[0m
[34minfra/k8s_ansible/roles/users-config[0m:1

]8;id=807274;https://ansible.readthedocs.io/projects/lint/rules/fqcn/\[1;91mfqcn[canonical][0m]8;;\[2m:[0m [91mYou should use canonical module name `ansible.posix.authorized_key` instead of `ansible.builtin.authorized_key`.[0m
[34minfra/k8s_ansible/roles/users-config/tasks/main.yml[0m:72 [2mTask/Handler: Add SSH authorized keys (list)[0m

]8;id=604178;https://ansible.readthedocs.io/projects/lint/rules/fqcn/\[1;91mfqcn[canonical][0m]8;;\[2m:[0m [91mYou should use canonical module name `ansible.posix.authorized_key` instead of `ansible.builtin.authorized_key`.[0m
[34minfra/k8s_ansible/roles/users-config/tasks/main.yml[0m:82 [2mTask/Handler: Add SSH authorized key (single)[0m

]8;id=487359;https://ansible.readthedocs.io/projects/lint/rules/role-name/\[1;91mrole-name[0m]8;;\[2m:[0m [91mRole name vault-users does not match ``^[a-z][a-z0-9_]*$`` pattern.[0m
[34minfra/k8s_ansible/roles/vault-users[0m:1

]8;id=812070;https://ansible.readthedocs.io/projects/lint/rules/command-instead-of-module/\[1;91mcommand-instead-of-module[0m]8;;\[2m:[0m [91msystemctl used in place of systemd module[0m
[34minfra/k8s_ansible/roles/vault/tasks/main.yml[0m:64 [2mTask/Handler: Reload systemd[0m

]8;id=362145;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/vault/tasks/main.yml[0m:64 [2mTask/Handler: Reload systemd[0m

]8;id=47981;https://ansible.readthedocs.io/projects/lint/rules/literal-compare/\[1;91mliteral-compare[0m]8;;\[2m:[0m [91mDon't compare to literal True/False.[0m
[34minfra/k8s_ansible/roles/vault/tasks/main.yml[0m:89 [2mTask/Handler: Initialize Vault only if not initialized[0m

]8;id=502490;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when/\[1;91mno-changed-when[0m]8;;\[2m:[0m [91mCommands should not change things if nothing needs doing.[0m
[34minfra/k8s_ansible/roles/vault/tasks/main.yml[0m:89 [2mTask/Handler: Initialize Vault only if not initialized[0m

]8;id=557218;https://ansible.readthedocs.io/projects/lint/rules/risky-file-permissions/\[1;91mrisky-file-permissions[0m]8;;\[2m:[0m [91mFile permissions unset or incorrect.[0m
[34minfra/k8s_ansible/roles/vault/tasks/main.yml[0m:197 [2mTask/Handler: Create flag file so the task is idempotent (optional)[0m

]8;id=684779;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:2

]8;id=371245;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "storageclassname" in mapping[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:18

]8;id=235693;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "apiversion" in mapping[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:156

]8;id=139483;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "kind" in mapping[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:157

]8;id=674769;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "metadata" in mapping[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:158

]8;id=688539;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[key-duplicates][0m]8;;\[2m:[0m [91mDuplication of key "spec" in mapping[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:163

]8;id=331840;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[indentation][0m]8;;\[2m:[0m [91mWrong indentation: expected 4 but found 2[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:166

]8;id=459907;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[indentation][0m]8;;\[2m:[0m [91mWrong indentation: expected 8 but found 6[0m
[34mk8s-apps/nudger-xwiki/setup.yaml[0m:169

]8;id=10508;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[comments][0m]8;;\[2m:[0m [91mMissing starting space in comment[0m
[34mscripts/cloud-init.yaml[0m:1

]8;id=226981;https://ansible.readthedocs.io/projects/lint/rules/yaml/\[1;91myaml[document-start][0m]8;;\[2m:[0m [91mMissing document start "---"[0m
[34mscripts/cloud-init.yaml[0m:2

Read ]8;id=921601;https://ansible.readthedocs.io/projects/lint/configuring/#ignoring-rules-for-entire-files\documentation]8;;\ for instructions on how to ignore specific rule violations.

[3m                          Rule Violation Summary                          [0m
[1m [0m[1mcount[0m[1m [0m[1mtag                         [0m[1m [0m[1mprofile   [0m[1m [0m[1mrule associated tags      [0m[1m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=611425;https://ansible.readthedocs.io/projects/lint/rules/internal-error\[31minternal-error[0m]8;;\[31m              [0m[31m [0m[31mmin       [0m[31m [0m[31mcore                      [0m[31m [0m
[31m [0m[31m    8[0m[31m [0m]8;id=277887;https://ansible.readthedocs.io/projects/lint/rules/syntax-check\[31msyntax-check[specific][0m]8;;\[31m      [0m[31m [0m[31mmin       [0m[31m [0m[31mcore, unskippable         [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=812012;https://ansible.readthedocs.io/projects/lint/rules/syntax-check\[31msyntax-check[unknown-module][0m]8;;\[31m [0m[31mmin       [0m[31m [0m[31mcore, unskippable         [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=974849;https://ansible.readthedocs.io/projects/lint/rules/command-instead-of-module\[31mcommand-instead-of-module[0m]8;;\[31m   [0m[31m [0m[31mbasic     [0m[31m [0m[31mcommand-shell, idiom      [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=949963;https://ansible.readthedocs.io/projects/lint/rules/literal-compare\[31mliteral-compare[0m]8;;\[31m             [0m[31m [0m[31mbasic     [0m[31m [0m[31midiom                     [0m[31m [0m
[31m [0m[31m   10[0m[31m [0m]8;id=828678;https://ansible.readthedocs.io/projects/lint/rules/jinja\[31mjinja[spacing][0m]8;;\[31m              [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting                [0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=900356;https://ansible.readthedocs.io/projects/lint/rules/partial-become\[31mpartial-become[task][0m]8;;\[31m        [0m[31m [0m[31mbasic     [0m[31m [0m[31munpredictability          [0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=74969;https://ansible.readthedocs.io/projects/lint/rules/role-name\[31mrole-name[0m]8;;\[31m                   [0m[31m [0m[31mbasic     [0m[31m [0m[31mdeprecations, metadata    [0m[31m [0m
[31m [0m[31m    9[0m[31m [0m]8;id=324802;https://ansible.readthedocs.io/projects/lint/rules/name\[31mname[missing][0m]8;;\[31m               [0m[31m [0m[31mbasic     [0m[31m [0m[31midiom                     [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=368043;https://ansible.readthedocs.io/projects/lint/rules/name\[31mname[play][0m]8;;\[31m                  [0m[31m [0m[31mbasic     [0m[31m [0m[31midiom                     [0m[31m [0m
[31m [0m[31m    8[0m[31m [0m]8;id=333296;https://ansible.readthedocs.io/projects/lint/rules/var-naming\[31mvar-naming[no-role-prefix][0m]8;;\[31m  [0m[31m [0m[31mbasic     [0m[31m [0m[31midiom                     [0m[31m [0m
[31m [0m[31m    4[0m[31m [0m]8;id=36705;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[colons][0m]8;;\[31m                [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=339789;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[commas][0m]8;;\[31m                [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m    4[0m[31m [0m]8;id=105715;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[comments][0m]8;;\[31m              [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m   10[0m[31m [0m]8;id=820413;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[document-start][0m]8;;\[31m        [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=161481;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[empty-lines][0m]8;;\[31m           [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=787080;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[indentation][0m]8;;\[31m           [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m    6[0m[31m [0m]8;id=853314;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[key-duplicates][0m]8;;\[31m        [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=277855;https://ansible.readthedocs.io/projects/lint/rules/yaml\[31myaml[trailing-spaces][0m]8;;\[31m       [0m[31m [0m[31mbasic     [0m[31m [0m[31mformatting, yaml          [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=903421;https://ansible.readthedocs.io/projects/lint/rules/name\[31mname[template][0m]8;;\[31m              [0m[31m [0m[31mmoderate  [0m[31m [0m[31midiom                     [0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=661712;https://ansible.readthedocs.io/projects/lint/rules/risky-file-permissions\[31mrisky-file-permissions[0m]8;;\[31m      [0m[31m [0m[31msafety    [0m[31m [0m[31munpredictability          [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=683318;https://ansible.readthedocs.io/projects/lint/rules/risky-shell-pipe\[31mrisky-shell-pipe[0m]8;;\[31m            [0m[31m [0m[31msafety    [0m[31m [0m[31mcommand-shell             [0m[31m [0m
[31m [0m[31m   10[0m[31m [0m]8;id=438247;https://ansible.readthedocs.io/projects/lint/rules/no-changed-when\[31mno-changed-when[0m]8;;\[31m             [0m[31m [0m[31mshared    [0m[31m [0m[31mcommand-shell, idempotency[0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=158667;https://ansible.readthedocs.io/projects/lint/rules/fqcn\[31mfqcn[action-core][0m]8;;\[31m           [0m[31m [0m[31mproduction[0m[31m [0m[31mformatting                [0m[31m [0m
[31m [0m[31m    2[0m[31m [0m]8;id=544217;https://ansible.readthedocs.io/projects/lint/rules/fqcn\[31mfqcn[canonical][0m]8;;\[31m             [0m[31m [0m[31mproduction[0m[31m [0m[31mformatting                [0m[31m [0m
[31m [0m[31m    1[0m[31m [0m]8;id=559284;https://ansible.readthedocs.io/projects/lint/rules/fqcn\[31mfqcn[keyword][0m]8;;\[31m               [0m[31m [0m[31mproduction[0m[31m [0m[31mformatting                [0m[31m [0m

[1;31mFailed[0m: [1;36m94[0m [1;35mfailure[0m[1m([0ms[1m)[0m, [1;36m0[0m [1;35mwarning[0m[1m([0ms[1m)[0m on [1;36m188[0m files. Profile [32m'production'[0m was required.

Detect secrets...........................................................Failed
- hook id: detect-secrets
- files were modified by this hook
